"use strict";(()=>{var e={};e.id=619,e.ids=[619],e.modules={3189:(e,t,r)=>{r.r(t),r.d(t,{config:()=>f,default:()=>p,routeModule:()=>c});var s={};r.r(s),r.d(s,{default:()=>d});var i=r(3480),a=r(8667),o=r(6435),n=r(6258),u=r(5542),l=r(2043);async function d(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let r,s=await (0,u.getServerSession)(e,t,l.authOptions);if(!s)return t.status(401).json({error:"Unauthorized"});let{folderId:i="root",search:a}=e.query,o=new n.z;r=a?await o.searchFiles(a,s.user.id):(await o.getFolderContents(i,s.user.id)).files,t.status(200).json({success:!0,files:r,total:r.length})}catch(e){console.error("List files error:",e),t.status(500).json({error:"Failed to list files",message:e.message})}}let p=(0,o.M)(s,"default"),f=(0,o.M)(s,"config"),c=new i.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/files/list",pathname:"/api/files/list",bundlePath:"",filename:""},userland:s})},5511:e=>{e.exports=require("crypto")},5542:e=>{e.exports=require("next-auth")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6209:e=>{e.exports=require("node-telegram-bot-api")}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[622],()=>r(3189));module.exports=s})();